# Paste2Typing - 剪贴板历史记录与自动输入工具

## 📋 应用简介

Paste2Typing 是一个专为 macOS 设计的剪贴板历史记录管理工具，具有自动输入功能。它能够自动记录剪贴板内容，支持快捷键触发输入，并提供丰富的管理功能。

## ✨ 主要功能

### 1. 剪贴板历史记录
- **自动记录**：自动监控并记录剪贴板内容变化
- **历史管理**：保存最近的剪贴板内容，支持自定义保存条数（1-1000条）
- **持久化存储**：历史记录自动保存，重启应用后数据不丢失
- **智能去重**：避免重复记录相同内容

### 2. 自动输入功能
- **快捷键触发**：支持自定义快捷键（F1-F20）触发输入
- **智能字符处理**：
  - ASCII字符：使用高效的ASCII输入方法
  - Unicode字符：使用兼容的Unicode输入方法
  - 混合内容：自动选择最佳输入方法
- **换行符支持**：正确处理各种换行符格式
- **输入间隔控制**：可调节输入速度（10-100毫秒）

### 3. 历史记录管理
- **双击输入**：双击历史记录项直接开始输入
- **编辑功能**：支持编辑历史记录内容
- **删除功能**：支持单个删除和批量删除
- **批量选择**：支持多选历史记录项进行批量操作

### 4. 界面特性
- **现代化UI**：简洁美观的界面设计
- **响应式布局**：根据窗口大小动态调整显示内容
- **实时状态**：显示当前快捷键设置和状态信息

## 🚀 使用方法

### 首次使用
1. **权限设置**：首次运行需要授予辅助功能权限
   - 应用会自动打开系统偏好设置
   - 在"安全性与隐私" > "辅助功能"中添加本应用
   - 勾选应用以启用辅助功能

2. **快捷键设置**：
   - 粘贴快捷键：默认为F10，可自定义
   - 停止快捷键：默认为F12，可自定义
   - 设置会自动保存

### 日常使用
1. **复制内容**：正常复制任何文本内容
2. **查看历史**：在应用界面查看剪贴板历史记录
3. **触发输入**：
   - 方式一：按下设置的粘贴快捷键
   - 方式二：双击历史记录项
   - 方式三：选择项目后点击"模拟输入"按钮
4. **停止输入**：按下设置的停止快捷键

### 历史记录管理
- **编辑记录**：选择项目后点击"编辑"按钮
- **删除记录**：选择项目后点击"删除"按钮
- **批量删除**：多选项目后点击"批量删除"按钮
- **调整条数**：使用滑块或下拉菜单设置保存条数

## ⚙️ 设置选项

### 快捷键设置
- **粘贴快捷键**：触发自动输入的快捷键
- **停止快捷键**：停止当前输入过程的快捷键
- **支持范围**：F1-F20功能键

### 输入设置
- **输入间隔**：控制输入速度（10-100毫秒）
- **字符处理**：自动选择ASCII或Unicode输入方法

### 历史记录设置
- **保存条数**：设置历史记录最大保存数量（1-1000条）
- **自动截取**：超过限制时自动保留最新的记录

## 🔧 技术特点

### 系统集成
- **辅助功能API**：使用macOS辅助功能API实现全局快捷键监听
- **剪贴板监控**：实时监控系统剪贴板变化
- **事件模拟**：模拟键盘输入事件

### 数据处理
- **智能字符检测**：自动识别ASCII和Unicode字符
- **换行符统一**：统一处理各种换行符格式
- **数据持久化**：使用UserDefaults保存设置和历史记录

### 用户体验
- **单实例运行**：确保同时只有一个应用实例
- **权限检查**：定期检查辅助功能权限状态
- **错误处理**：完善的错误提示和处理机制

## 📁 文件结构

```
Paste2Typing/
├── main.swift              # 主程序文件
├── README.md              # 说明文档
├── CHANGELOG.md           # 更新日志
├── USAGE.md              # 使用说明
├── PERMISSION_SETUP.md   # 权限设置说明
└── Paste2Typing.app/     # 编译后的应用
```

## 🛠️ 编译说明

### 环境要求
- macOS 10.15 或更高版本
- Xcode 命令行工具
- Swift 5.0 或更高版本

### 编译命令
```bash
swiftc -o paste2typing main.swift -framework Cocoa -framework Carbon -framework QuartzCore
```

### 运行应用
```bash
./paste2typing
```

## 🔒 权限说明

### 辅助功能权限
- **用途**：监听全局快捷键和模拟键盘输入
- **设置方法**：系统偏好设置 > 安全性与隐私 > 辅助功能
- **重要性**：必须授予此权限才能正常使用

### 剪贴板访问
- **用途**：读取剪贴板内容
- **权限**：系统自动授予，无需手动设置

## 🐛 故障排除

### 常见问题

1. **快捷键无响应**
   - 检查辅助功能权限是否已授予
   - 确认快捷键设置是否正确
   - 重启应用后重试

2. **输入内容不完整**
   - 调整输入间隔设置
   - 检查目标应用是否支持文本输入
   - 确保目标应用处于活动状态

3. **历史记录不保存**
   - 检查应用是否有写入权限
   - 重启应用后查看是否恢复

4. **界面显示异常**
   - 调整窗口大小
   - 重启应用

### 调试信息
应用会在控制台输出调试信息，包括：
- 权限状态检查
- 快捷键事件处理
- 剪贴板变化监控
- 输入过程状态

## 📝 更新日志

### v1.0.0
- 基础剪贴板历史记录功能
- 快捷键触发自动输入
- 历史记录编辑和删除
- 设置持久化保存

### v1.1.0
- 添加批量删除功能
- 历史记录条数设置
- 优化UI布局和样式
- 改进错误处理

### v1.2.0
- 智能字符输入方法选择
- 换行符统一处理
- 双击输入功能
- 响应式布局优化

## 📄 许可证

本项目采用 MIT 许可证，详见 LICENSE 文件。

## 🤝 贡献

欢迎提交 Issue 和 Pull Request 来改进这个项目。

## 📞 支持

如果您在使用过程中遇到问题，请：
1. 查看本文档的故障排除部分
2. 检查权限设置是否正确
3. 提交 Issue 描述具体问题

---

**注意**：使用本应用时请遵守相关法律法规，不要用于非法用途。 